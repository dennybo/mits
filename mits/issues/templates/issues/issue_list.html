{% extends 'projects/project_base.html' %}


{% block title %}
  {{ project.name }}
{% endblock %}


{% block action_button %}
  <div class="btn-group" role="group" aria-label="...">
    <button type="button" class="btn btn-default active"><span class="glyphicon glyphicon-eye-open"></span></button>
    <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-eye-close"></span></button>
  </div>

  <a href="{% url 'issues:issue_create' project.pk %}" class="btn btn-success load-modal" title="New Issue">
    <span class="glyphicon glyphicon-plus"></span>
    <span class="hidden-xs">New Issue</span>
  </a>
{% endblock %}


{% block content %}
  <div class="row row-vspace">
    <div class="col-sm-12">
      {% if project.issue_set.count == 0 %}
        <div class="jumbotron text-center">
          <h1>No issues!</h1>
          <p>Your project is empty, maybe you would want to add an issue?</p>
          <a href="{% url 'issues:issue_create' project.pk %}" class="btn btn-success load-modal">
            <span class="glyphicon glyphicon-plus"></span> New Issue</a>
        </div>
      {% else %}
        <div class="list-group">

          {% for issue in project.issue_set.all %}
            <a href="{{ issue.get_absolute_url }}" class="list-group-item">
              <div class="pull-right text-muted text-uppercase">
                <small class="text-right">
                  <div>
                    {{ issue.owner.username }}
                    <span class="glyphicon glyphicon-eye-open back-step"></span>
                  </div>

                  <div>{{ issue.create_date|date:'d.m.Y h:m' }}</div>
                </small>
              </div>

              <div>
                <span class="text-primary">{{ issue.name }}</span>
                <span class="text-muted">#{{ issue.index }}</span>
              </div>

              <div>
                {% if issue.tags.count == 0 %}
                  <span class="label label-default">no tags</span>
                {% endif %}

                {% for tag in issue.tags.all %}
                  <span class="label" style="background-color: {{ tag.color }}">{{ tag.name }}</span>
                {% endfor %}
              </div>

              <div class="clearfix"></div>
            </a>
          {% endfor %}

        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
